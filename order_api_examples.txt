ORDER API QUICK REFERENCE
=========================

Each entry below follows the same three-part structure so you can skim
quickly while building or debugging.

----------------------------------------------------------------------
Endpoint: POST /api/orders
Purpose : Convert the customer’s cart into a finalized order. Supports
          both logged-in users (`user_id`) and guests (`guest_id`),
          copies address info, applies tax/fees/discounts, creates
          `order_items`, empties the cart, and triggers confirmation
          emails.
Method  : POST

----------------------------------------------------------------------
Endpoint: GET /api/orders/{id}
Purpose : Fetch the full detail of a single order (same data shape as
          the create response). Will accept optional `user_id` or
          `guest_id` query params to ensure the requester owns the
          order. **Status:** planned/not implemented yet.
Method  : GET

----------------------------------------------------------------------
Endpoint: GET /api/orders
Purpose : Admin-only listing of orders with filtering (`user_id`,
          `guest_id`, `status`) and pagination (`page`, `per_page`).
          Each record now ships with `order_items` (full cart lines)
          plus a `summary` block that spells out items_price, tax,
          delivery, discount, and payable total. Requires
          `Authorization: Bearer {{admin_token}}`.
Method  : GET

----------------------------------------------------------------------
Endpoint: PUT /api/orders/{id}
Purpose : Admin-only status update. Accepts `status` (pending,
          cooking, on_the_way, delivered) and/or `payment_status`
          (paid, unpaid). Use this to advance kitchen workflow or
          mark payments as settled. Requires `Authorization: Bearer
          {{admin_token}}`.
Method  : PUT

----------------------------------------------------------------------
Endpoint: n/a (status helper)
Purpose : Reference for allowed order statuses used across endpoints.
          - `pending`   → order created, waiting for kitchen.
          - `cooking`   → order accepted, being prepared.
          - `on_the_way`→ rider picked up, en route to customer.
          - `delivered` → customer received the order.
          Payment status:
           - `unpaid` (default) → new orders.
           - `paid` → marked after settlement.
Method  : (informational)

----------------------------------------------------------------------
Endpoint: n/a (system behavior notes)
Purpose : Highlights of internal logic that apply to every order call:
          - Cart rows are grouped by `item_id + price_id` to compute
            quantities.
          - Discounts live on cart rows and are capped to the subtotal.
          - `order_items.price` stores a snapshot so history survives
            future menu changes.
          - Responses always use the `{success,status,message,data}`
            envelope for consistency.
          - Every new order is created with `payment_status = unpaid`;
            admins flip it to `paid` via the dedicated update endpoint.
Method  : (informational)
